<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Summary - Song List Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/songs-summary.css">
    <link rel="stylesheet" href="lib/font-awesome.min.css">
    <script src="lib/xlsx.full.min.js"></script>
    
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <span class="brand-icon"><i class="fas fa-music"></i></span>
                <span data-en="Song List Manager" data-ja="æ›²åˆ—è¡¨ç®¡ç†">Song List Manager</span>
            </a>
            <ul class="nav-menu">
                <li><a href="songs-summary.html" class="active"><i class="fas fa-list"></i> <span class="nav-text" data-en="Song Summary" data-ja="æ›²ã¾ã¨ã‚">Song Summary</span></a></li>
                <li><a href="random-pick.html"><i class="fas fa-dice"></i> <span class="nav-text" data-en="Random Pick" data-ja="ãƒ©ãƒ³ãƒ€ãƒ ãƒ”ãƒƒã‚¯">Random Pick</span></a></li>
                <li><a href="settings.html"><i class="fas fa-cog"></i> <span class="nav-text" data-en="Settings" data-ja="è¨­å®š">Settings</span></a></li>
                <li><a href="#" class="lang-toggle" onclick="toggleLanguage(); return false;" aria-label="Toggle language"><i class="fas fa-language" aria-hidden="true"></i> <span class="nav-text" id="langLabel">EN</span></a></li>
            </ul>
        </div>
    </nav>

    <div class="container" id="main-content">
        <div class="page-flag-header">
            <h1><span class="header-icon"><i class="fas fa-clipboard-list"></i></span> <span data-en="Song Summary" data-ja="æ›²ã¾ã¨ã‚">Song Summary</span></h1>
            <div class="btn-group">
                <button class="btn btn-export" onclick="exportToXLSX()">
                    <span class="btn-icon"><i class="fas fa-download"></i></span> <span data-en="Export XLSX" data-ja="XLSXã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ">Export XLSX</span>
                </button>
                <button class="btn btn-export" onclick="exportToCSV()">
                    <span class="btn-icon"><i class="fas fa-file-csv"></i></span> <span data-en="Export CSV" data-ja="CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ">Export CSV</span>
                </button>
            </div>
        </div>
        


        <!-- Tabs -->
        <div class="summary-tabs">
            <button class="summary-tab active" onclick="showTab('dashboard')">
                <i class="fas fa-chart-bar"></i> <span data-en="Dashboard" data-ja="ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰">Dashboard</span>
            </button>
            <button class="summary-tab" onclick="showTab('import')">
                <i class="fas fa-file-import"></i> <span data-en="Import" data-ja="ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">Import</span>
            </button>
            <button class="summary-tab" onclick="showTab('allsongs')">
                <i class="fas fa-music"></i> <span data-en="All Songs" data-ja="å…¨æ›²">All Songs</span>
            </button>
            <button class="summary-tab" onclick="showTab('bydate')">
                <i class="fas fa-calendar-alt"></i> <span data-en="By Date" data-ja="æ—¥ä»˜é †">By Date</span>
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <!-- Main Stats -->
            <div class="dashboard-grid">
                <div class="stat-card stat-card-blue">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="uniqueSongs">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <i class="fas fa-music"></i> <span data-en="Unique Song & Singer Groups" data-ja="ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ›²ã¨æ­Œæ‰‹ã‚°ãƒ«ãƒ¼ãƒ—">Unique Song & Singer Groups</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card-orange">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="totalPlays">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <i class="fas fa-fire"></i> <span data-en="Total Song Entries" data-ja="ç·æ›²æ•°">Total Song Entries</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card-green">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="uniqueSingers">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <i class="fas fa-user"></i> <span data-en="Unique Singers" data-ja="ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ­Œæ‰‹æ•°">Unique Singers</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-trophy"></i> <span data-en="Top 10 Most Played Songs" data-ja="å†ç”Ÿå›žæ•°ãƒˆãƒƒãƒ—10">Top 10 Most Played Songs</span></h3>
                    </div>
                    <div class="top-songs-list" id="topSongsList">
                        <div class="empty-state">
                            <i class="fas fa-music"></i>
                            <p><span data-en="No data yet" data-ja="ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“">No data yet</span></p>
                        </div>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-microphone"></i> <span data-en="Top Singers" data-ja="æ­Œæ‰‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°">Top Singers</span></h3>
                    </div>
                    <div class="top-songs-list" id="topSingersList">
                        <div class="empty-state">
                            <i class="fas fa-user"></i>
                            <p><span data-en="No data yet" data-ja="ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“">No data yet</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-clock"></i> <span data-en="Recently Added" data-ja="æœ€è¿‘è¿½åŠ ">Recently Added</span></h2>
                </div>
                <div class="list-container" id="recentActivity">
                    <div class="empty-state">
                        <i class="fas fa-edit"></i>
                        <p><span data-en="No recent activity" data-ja="æœ€è¿‘ã®æ´»å‹•ã¯ã‚ã‚Šã¾ã›ã‚“">No recent activity</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Import Tab -->
        <div id="import" class="tab-content">
            <div class="main-grid">
                <!-- Manual Import -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-plus-circle"></i> <span data-en="Add Single Song" data-ja="å•æ›²è¿½åŠ ">Add Single Song</span></h2>
                    </div>

                    <form onsubmit="addSingleSong(event)">
                        <div class="form-group">
                            <label for="songName">
                                <i class="fas fa-music"></i> <span data-en="Song Name (Japanese)" data-ja="æ›²å (æ—¥æœ¬èªž)">Song Name (Japanese)</span> *
                            </label>
                            <input type="text" id="songName" name="songName" data-en-placeholder="Enter song name in Japanese" data-ja-placeholder="æ›²åã‚’å…¥åŠ› (æ—¥æœ¬èªž)" placeholder="Enter song name in Japanese" required>
                        </div>

                        <div class="form-group">
                            <label for="songNameEnglish">
                                <i class="fas fa-music"></i> <span data-en="Song Name (English)" data-ja="æ›²å (è‹±èªž)">Song Name (English)</span>
                            </label>
                            <input type="text" id="songNameEnglish" name="songNameEnglish" data-en-placeholder="Enter song name in English (optional)" data-ja-placeholder="æ›²åã‚’å…¥åŠ› (è‹±èªž/ä»»æ„)" placeholder="Enter song name in English (optional)">
                        </div>

                        <div class="form-group">
                            <label for="songSinger">
                                <i class="fas fa-microphone"></i> <span data-en="Singer (Japanese)" data-ja="æ­Œæ‰‹ (æ—¥æœ¬èªž)">Singer (Japanese)</span>
                            </label>
                            <input type="text" id="songSinger" name="songSinger" data-en-placeholder="Enter singer name in Japanese" data-ja-placeholder="æ­Œæ‰‹åã‚’å…¥åŠ› (æ—¥æœ¬èªž)" placeholder="Enter singer name in Japanese">
                        </div>

                        <div class="form-group">
                            <label for="songSingerEnglish">
                                <i class="fas fa-microphone"></i> <span data-en="Singer (English)" data-ja="æ­Œæ‰‹ (è‹±èªž)">Singer (English)</span>
                            </label>
                            <input type="text" id="songSingerEnglish" name="songSingerEnglish" data-en-placeholder="Enter singer name in English (optional)" data-ja-placeholder="æ­Œæ‰‹åã‚’å…¥åŠ› (è‹±èªž/ä»»æ„)" placeholder="Enter singer name in English (optional)">
                        </div>

                        <div class="form-group">
                            <label for="songType">
                                <i class="fas fa-tag"></i> <span data-en="Song Type" data-ja="æ›²ã‚¿ã‚¤ãƒ—">Song Type</span>
                            </label>
                            <div class="searchable-dropdown">
                                <input type="text" id="songType" name="songType" data-en-placeholder="Select or type new type..." data-ja-placeholder="ã‚¿ã‚¤ãƒ—ã‚’é¸æŠžã¾ãŸã¯å…¥åŠ›..." placeholder="Select or type new type..." autocomplete="off">
                                <div class="dropdown-list" id="songTypeDropdown"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-clock"></i> <span data-en="Duration (Start ~ End)" data-ja="æ™‚é–“ (é–‹å§‹ ~ çµ‚äº†)">Duration (Start ~ End)</span>
                            </label>
                            <div class="time-input-group">
                                <input type="text" id="songStartTime" name="songStartTime" data-en-placeholder="00:06:15" data-ja-placeholder="00:06:15" placeholder="00:06:15">
                                <span class="time-separator">~</span>
                                <input type="text" id="songEndTime" name="songEndTime" data-en-placeholder="00:10:29" data-ja-placeholder="00:10:29" placeholder="00:10:29">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="importDate">
                                <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="æ—¥ä»˜">Date</span>
                            </label>
                            <input type="date" id="importDate" name="importDate">
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-plus"></i> <span data-en="Add Song" data-ja="è¿½åŠ ">Add Song</span>
                        </button>
                    </form>
                </div>

                <!-- Bulk Import -->
                <div class="card" style="display: flex; flex-direction: column;">
                    <div class="card-header">
                        <h2><i class="fas fa-clipboard-list"></i> <span data-en="Bulk Import" data-ja="ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">Bulk Import</span></h2>
                    </div>

                    <div class="form-group">
                        <label for="bulkDate">
                            <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="æ—¥ä»˜">Date</span>
                        </label>
                        <input type="date" id="bulkDate" name="bulkDate">
                    </div>

                    <div class="form-group" style="flex: 1; display: flex; flex-direction: column;">
                        <label>
                            <i class="fas fa-info-circle"></i> <span data-en="Format" data-ja="å½¢å¼">Format</span>
                        </label>
                        <textarea id="bulkInput" name="bulkInput" style="flex: 1; min-height: 200px;" data-en-placeholder="Enter songs (one per line):&#10;&#10;Format 1 (with sequence): 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ(Shiranaiuta) | è‹ºå’²ã¹ã‚Šãƒ(Maisaki Berry)&#10;Format 2 (no sequence): 00:06:33 ~ 00:10:19 | ã—ã‚‰ãªã„ã†ãŸ(Shiranaiuta) | è‹ºå’²ã¹ã‚Šãƒ(Maisaki Berry)&#10;&#10;English names are optional: 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ | è‹ºå’²ã¹ã‚Šãƒ" data-ja-placeholder="æ›²ã‚’å…¥åŠ› (1è¡Œã«1æ›²):&#10;&#10;å½¢å¼1 (Seqã‚ã‚Š): 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ | è‹ºå’²ã¹ã‚Šãƒ&#10;å½¢å¼2 (Seqãªã—): 00:06:33 ~ 00:10:19 | ã—ã‚‰ãªã„ã†ãŸ | è‹ºå’²ã¹ã‚Šãƒ&#10;&#10;è‹±èªžåã¯ä»»æ„: 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ | è‹ºå’²ã¹ã‚Šãƒ" placeholder="Enter songs (one per line):&#10;&#10;Format 1 (with sequence): 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ(Shiranaiuta) | è‹ºå’²ã¹ã‚Šãƒ(Maisaki Berry)&#10;Format 2 (no sequence): 00:06:33 ~ 00:10:19 | ã—ã‚‰ãªã„ã†ãŸ(Shiranaiuta) | è‹ºå’²ã¹ã‚Šãƒ(Maisaki Berry)&#10;&#10;English names are optional: 00:06:33 ~ 00:10:19 01| ã—ã‚‰ãªã„ã†ãŸ | è‹ºå’²ã¹ã‚Šãƒ"></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="addBulkSongs()" style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-plus"></i> <span data-en="Import All" data-ja="å…¨ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">Import All</span> (<span id="bulkCount">0</span> songs)
                    </button>
                </div>
            </div>

            <!-- File Import -->
            <div class="card" style="margin-top: 25px;">
                <div class="card-header">
                    <h2><i class="fas fa-folder-open"></i> <span data-en="Import from File" data-ja="ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">Import from File</span></h2>
                </div>

                <div class="form-group">
                    <label for="fileDate">
                        <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="æ—¥ä»˜">Date</span>
                    </label>
                    <input type="date" id="fileDate" name="fileDate">
                </div>

                <div class="actions-bar">
                    <input type="file" id="fileInput" accept=".txt,.csv,.xlsx,.xls" onchange="importFromFile(event)" style="display: none;">
                    <button class="btn" onclick="document.getElementById('fileInput').click()" aria-label="Choose file to import">
                        <i class="fas fa-file-upload" aria-hidden="true"></i> <span data-en="Choose File" data-ja="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠž">Choose File</span>
                    </button>
                    <button class="btn" onclick="downloadTemplate()">
                        <i class="fas fa-download"></i> <span data-en="Download Template" data-ja="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">Download Template</span>
                    </button>
                </div>

                <p style="color: #888; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Supported formats: .txt, .csv, .xlsx
                </p>
            </div>
        </div>

        <!-- All Songs Tab -->
        <div id="allsongs" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-music"></i> <span data-en="All Songs" data-ja="å…¨æ›²">All Songs</span></h2>
                </div>
                <div class="actions-bar">
                    <div class="searchable-dropdown" style="flex: 1; max-width: 250px;">
                        <input type="text" id="songTypeFilter" name="songTypeFilter" data-en-placeholder="Filter by song type..." data-ja-placeholder="æ›²ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼..." placeholder="Filter by song type..." autocomplete="off">
                        <div class="dropdown-list" id="songTypeFilterDropdown"></div>
                    </div>
                </div>
                <div class="list-container" id="allSongsList">
                    <div class="empty-state">
                        <i class="fas fa-music"></i>
                        <p><span data-en="No songs yet" data-ja="æ›²ãŒã‚ã‚Šã¾ã›ã‚“">No songs yet</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- By Date Tab -->
        <div id="bydate" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><span class="card-icon">ðŸ“…</span> <span data-en="Songs by Date" data-ja="æ—¥ä»˜åˆ¥æ›²">Songs by Date</span></h2>
                </div>
                <div class="list-container" id="songsList">
                    <div class="empty-state">
                        <i class="fas fa-calendar"></i>
                        <p><span data-en="No songs yet" data-ja="æ›²ãŒã‚ã‚Šã¾ã›ã‚“">No songs yet</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-eye"></i> <span data-en="Preview Import" data-ja="ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">Preview Import</span></h3>
                <button class="modal-close" onclick="closePreviewModal()" aria-label="Close modal">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: #888;">
                    <span id="previewModalCount">0</span> songs to import
                </p>
                <div class="list-container" id="previewModalList" style="max-height: 300px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="cancelImport()">
                    <i class="fas fa-times"></i> <span data-en="Cancel" data-ja="ã‚­ãƒ£ãƒ³ã‚»ãƒ«">Cancel</span>
                </button>
                <button class="btn btn-primary" onclick="confirmImport()">
                    <i class="fas fa-check"></i> <span data-en="Import All" data-ja="å…¨ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">Import All</span>
                </button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/songs-summary.js"></script>
</body>
</html>