<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Summary - Song List Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/songs-summary.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <span class="brand-icon">üéµ</span>
                <span data-en="Song List Manager" data-ja="Êõ≤ÂàóË°®ÁÆ°ÁêÜ">Song List Manager</span>
            </a>
            <ul class="nav-menu">
                <li><a href="songs-summary.html" class="active"><i class="fas fa-list"></i> <span class="nav-text" data-en="Song Summary" data-ja="Êõ≤„Åæ„Å®„ÇÅ">Song Summary</span></a></li>
                <li><a href="random-pick.html"><i class="fas fa-dice"></i> <span class="nav-text" data-en="Random Pick" data-ja="„É©„É≥„ÉÄ„É†„Éî„ÉÉ„ÇØ">Random Pick</span></a></li>
                <li><a href="settings.html"><i class="fas fa-cog"></i> <span class="nav-text" data-en="Settings" data-ja="Ë®≠ÂÆö">Settings</span></a></li>
                <li><a href="#" class="lang-toggle" onclick="toggleLanguage(); return false;"><i class="fas fa-language"></i> <span class="nav-text" id="langLabel">EN</span></a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1><span class="header-icon">üìã</span> <span data-en="Song Summary" data-ja="Êõ≤„Åæ„Å®„ÇÅ">Song Summary</span></h1>
            <div class="btn-group">
                <button class="btn btn-export" onclick="exportToXLSX()">
                    <span class="btn-icon">üì•</span> <span data-en="Export XLSX" data-ja="XLSX„Ç®„ÇØ„Çπ„Éù„Éº„Éà">Export XLSX</span>
                </button>
                <button class="btn btn-export" onclick="exportToCSV()">
                    <span class="btn-icon">üìã</span> <span data-en="Export CSV" data-ja="CSV„Ç®„ÇØ„Çπ„Éù„Éº„Éà">Export CSV</span>
                </button>
            </div>
        </div>

        <!-- Tabs -->
        <div class="summary-tabs">
            <button class="summary-tab active" onclick="showTab('dashboard')">
                <i class="fas fa-chart-bar"></i> <span data-en="Dashboard" data-ja="„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ">Dashboard</span>
            </button>
            <button class="summary-tab" onclick="showTab('import')">
                <i class="fas fa-file-import"></i> <span data-en="Import" data-ja="„Ç§„É≥„Éù„Éº„Éà">Import</span>
            </button>
            <button class="summary-tab" onclick="showTab('allsongs')">
                <i class="fas fa-music"></i> <span data-en="All Songs" data-ja="ÂÖ®Êõ≤">All Songs</span>
            </button>
            <button class="summary-tab" onclick="showTab('bydate')">
                <i class="fas fa-calendar-alt"></i> <span data-en="By Date" data-ja="Êó•‰ªòÈ†Ü">By Date</span>
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <!-- Main Stats -->
            <div class="dashboard-grid">
                <div class="stat-card stat-card-blue">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <span class="stat-emoji">üé§</span>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="uniqueSongs">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <span class="label-icon">üéµ</span> <span data-en="Unique Song & Singer Groups" data-ja="„É¶„Éã„Éº„ÇØ„Å™Êõ≤„Å®Ê≠åÊâã„Ç∞„É´„Éº„Éó">Unique Song & Singer Groups</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card-purple">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <span class="stat-emoji">‚ñ∂Ô∏è</span>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="totalPlays">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <span class="label-icon">üî•</span> <span data-en="Total Song Entries" data-ja="Á∑èÊõ≤Êï∞">Total Song Entries</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card-green">
                    <div class="stat-header-row">
                        <div class="stat-icon-wrap">
                            <span class="stat-emoji">‚≠ê</span>
                        </div>
                        <div class="stat-number-wrap">
                            <div class="number" id="uniqueSingers">0</div>
                        </div>
                    </div>
                    <div class="stat-content">
                        <div class="label">
                            <span class="label-icon">üë§</span> <span data-en="Unique Singers" data-ja="„É¶„Éã„Éº„ÇØ„Å™Ê≠åÊâãÊï∞">Unique Singers</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><span class="chart-icon">ü•á</span> <span data-en="Top 10 Most Played Songs" data-ja="ÂÜçÁîüÂõûÊï∞„Éà„ÉÉ„Éó10">Top 10 Most Played Songs</span></h3>
                    </div>
                    <div class="top-songs-list" id="topSongsList">
                        <div class="empty-state">
                            <span class="empty-emoji">üé∂</span>
                            <p>No data yet</p>
                        </div>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3><span class="chart-icon">üé§</span> <span data-en="Top Singers" data-ja="Ê≠åÊâã„É©„É≥„Ç≠„É≥„Ç∞">Top Singers</span></h3>
                    </div>
                    <div class="top-songs-list" id="topSingersList">
                        <div class="empty-state">
                            <span class="empty-emoji">üé§</span>
                            <p>No data yet</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <h2><span class="card-icon">üïê</span> <span data-en="Recently Added" data-ja="ÊúÄËøëËøΩÂä†">Recently Added</span></h2>
                </div>
                <div class="list-container" id="recentActivity">
                    <div class="empty-state">
                        <span class="empty-emoji">üìù</span>
                        <p>No recent activity</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Import Tab -->
        <div id="import" class="tab-content">
            <div class="main-grid">
                <!-- Manual Import -->
                <div class="card">
                    <div class="card-header">
                        <h2><span class="card-icon">‚ûï</span> <span data-en="Add Single Song" data-ja="ÂçïÊõ≤ËøΩÂä†">Add Single Song</span></h2>
                    </div>

                    <form onsubmit="addSingleSong(event)">
                        <div class="form-group">
                            <label for="songName">
                                <i class="fas fa-music"></i> <span data-en="Song Name (Japanese)" data-ja="Êõ≤Âêç (Êó•Êú¨Ë™û)">Song Name (Japanese)</span> *
                            </label>
                            <input type="text" id="songName" placeholder="Enter song name in Japanese" required>
                        </div>

                        <div class="form-group">
                            <label for="songNameEnglish">
                                <i class="fas fa-music"></i> <span data-en="Song Name (English)" data-ja="Êõ≤Âêç (Ëã±Ë™û)">Song Name (English)</span>
                            </label>
                            <input type="text" id="songNameEnglish" placeholder="Enter song name in English (optional)">
                        </div>

                        <div class="form-group">
                            <label for="songSinger">
                                <i class="fas fa-microphone"></i> <span data-en="Singer (Japanese)" data-ja="Ê≠åÊâã (Êó•Êú¨Ë™û)">Singer (Japanese)</span>
                            </label>
                            <input type="text" id="songSinger" placeholder="Enter singer name in Japanese">
                        </div>

                        <div class="form-group">
                            <label for="songSingerEnglish">
                                <i class="fas fa-microphone"></i> <span data-en="Singer (English)" data-ja="Ê≠åÊâã (Ëã±Ë™û)">Singer (English)</span>
                            </label>
                            <input type="text" id="songSingerEnglish" placeholder="Enter singer name in English (optional)">
                        </div>

                        <div class="form-group">
                            <label for="songType">
                                <i class="fas fa-tag"></i> <span data-en="Song Type" data-ja="Êõ≤„Çø„Ç§„Éó">Song Type</span>
                            </label>
                            <div class="searchable-dropdown">
                                <input type="text" id="songType" placeholder="Select or type new type..." autocomplete="off">
                                <div class="dropdown-list" id="songTypeDropdown"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-clock"></i> <span data-en="Duration (Start ~ End)" data-ja="ÊôÇÈñì (ÈñãÂßã ~ ÁµÇ‰∫Ü)">Duration (Start ~ End)</span>
                            </label>
                            <div class="time-input-group">
                                <input type="text" id="songStartTime" placeholder="00:06:15">
                                <span class="time-separator">~</span>
                                <input type="text" id="songEndTime" placeholder="00:10:29">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="importDate">
                                <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="Êó•‰ªò">Date</span>
                            </label>
                            <input type="date" id="importDate">
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-plus"></i> <span data-en="Add Song" data-ja="ËøΩÂä†">Add Song</span>
                        </button>
                    </form>
                </div>

                <!-- Bulk Import -->
                <div class="card" style="display: flex; flex-direction: column;">
                    <div class="card-header">
                        <h2><span class="card-icon">üìã</span> <span data-en="Bulk Import" data-ja="‰∏ÄÊã¨„Ç§„É≥„Éù„Éº„Éà">Bulk Import</span></h2>
                    </div>

                    <div class="form-group">
                        <label for="bulkDate">
                            <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="Êó•‰ªò">Date</span>
                        </label>
                        <input type="date" id="bulkDate">
                    </div>

                    <div class="form-group" style="flex: 1; display: flex; flex-direction: column;">
                        <label>
                            <i class="fas fa-info-circle"></i> <span data-en="Format" data-ja="ÂΩ¢Âºè">Format</span>
                        </label>
                        <textarea id="bulkInput" style="flex: 1; min-height: 200px;" placeholder="Enter songs (one per line):&#10;&#10;Format 1 (with sequence): 00:06:33 ~ 00:10:19 01| „Åó„Çâ„Å™„ÅÑ„ÅÜ„Åü(Shiranaiuta) | Ëã∫Âí≤„Åπ„Çä„ÅÉ(Maisaki Berry)&#10;Format 2 (no sequence): 00:06:33 ~ 00:10:19 | „Åó„Çâ„Å™„ÅÑ„ÅÜ„Åü(Shiranaiuta) | Ëã∫Âí≤„Åπ„Çä„ÅÉ(Maisaki Berry)&#10;&#10;English names are optional: 00:06:33 ~ 00:10:19 01| „Åó„Çâ„Å™„ÅÑ„ÅÜ„Åü | Ëã∫Âí≤„Åπ„Çä„ÅÉ"></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="addBulkSongs()" style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-plus"></i> <span data-en="Import All" data-ja="ÂÖ®„Å¶„Ç§„É≥„Éù„Éº„Éà">Import All</span> (<span id="bulkCount">0</span> songs)
                    </button>
                </div>
            </div>

            <!-- File Import -->
            <div class="card" style="margin-top: 25px;">
                <div class="card-header">
                    <h2><span class="card-icon">üìÅ</span> <span data-en="Import from File" data-ja="„Éï„Ç°„Ç§„É´„Åã„Çâ„Ç§„É≥„Éù„Éº„Éà">Import from File</span></h2>
                </div>

                <div class="form-group">
                    <label for="fileDate">
                        <i class="fas fa-calendar"></i> <span data-en="Date" data-ja="Êó•‰ªò">Date</span>
                    </label>
                    <input type="date" id="fileDate">
                </div>

                <div class="actions-bar">
                    <input type="file" id="fileInput" accept=".txt,.csv,.xlsx,.xls" onchange="importFromFile(event)" style="display: none;">
                    <button class="btn" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-file-upload"></i> <span data-en="Choose File" data-ja="„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû">Choose File</span>
                    </button>
                    <button class="btn" onclick="downloadTemplate()">
                        <i class="fas fa-download"></i> <span data-en="Download Template" data-ja="„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">Download Template</span>
                    </button>
                </div>

                <p style="color: #888; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Supported formats: .txt, .csv, .xlsx
                </p>
            </div>
        </div>

        <!-- All Songs Tab -->
        <div id="allsongs" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><span class="card-icon">üéµ</span> <span data-en="All Songs" data-ja="ÂÖ®Êõ≤">All Songs</span></h2>
                </div>
                <div class="list-container" id="allSongsList">
                    <div class="empty-state">
                        <span class="empty-emoji">üé∂</span>
                        <p>No songs yet</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- By Date Tab -->
        <div id="bydate" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><span class="card-icon">üìÖ</span> <span data-en="Songs by Date" data-ja="Êó•‰ªòÂà•Êõ≤">Songs by Date</span></h2>
                </div>
                <div class="list-container" id="songsList">
                    <div class="empty-state">
                        <span class="empty-emoji">üìÖ</span>
                        <p>No songs yet</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-eye"></i> <span data-en="Preview Import" data-ja="„Ç§„É≥„Éù„Éº„Éà„Éó„É¨„Éì„É•„Éº">Preview Import</span></h3>
                <button class="modal-close" onclick="closePreviewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: #888;">
                    <span id="previewModalCount">0</span> songs to import
                </p>
                <div class="list-container" id="previewModalList" style="max-height: 300px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="cancelImport()">
                    <i class="fas fa-times"></i> <span data-en="Cancel" data-ja="„Ç≠„É£„É≥„Çª„É´">Cancel</span>
                </button>
                <button class="btn btn-primary" onclick="confirmImport()">
                    <i class="fas fa-check"></i> <span data-en="Import All" data-ja="ÂÖ®„Å¶„Ç§„É≥„Éù„Éº„Éà">Import All</span>
                </button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/songs-summary.js"></script>
</body>
</html>